buildscript {
    repositories {
        jcenter()
    }

    dependencies {
        classpath 'org.asciidoctor:asciidoctor-gradle-plugin:1.6.0'
        classpath 'org.asciidoctor:asciidoctorj-diagram:1.5.12'
    }
}

plugins {
    id 'org.ajoberstar.git-publish' version '2.0.0'
}

apply plugin: 'org.asciidoctor.convert'

asciidoctor {
    attributes \
        'toc': 'left',
        'imagesdir': 'images'
    sources { include '*.adoc' }
    requires 'asciidoctor-diagram'
    outputDir 'build'
}

build {
    dependsOn asciidoctor
}

gitPublish {
    repoUri = 'git@github.com:gurv/vg-doc.git'
    branch = 'gh-pages'
    contents {
        from 'build/html5'
    }
}
